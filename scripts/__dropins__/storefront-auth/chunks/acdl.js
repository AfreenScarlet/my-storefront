import"@dropins/tools/event-bus.js";import"@dropins/tools/recaptcha.js";import{g,a as u}from"./getStoreConfig.js";const m=e=>({personalEmail:{address:(e==null?void 0:e.email)||""},userAccount:{login:!0},commerce:{commerceScope:{storeCode:(e==null?void 0:e.store_code)||""}}}),C=e=>({userAccount:{logout:!0},commerce:{commerceScope:{storeCode:(e==null?void 0:e.store_code)||""}}}),f=e=>({personalEmail:{address:(e==null?void 0:e.email)||""},userAccount:{updateProfile:e==null?void 0:e.updateProfile},commerce:{commerceScope:{storeCode:(e==null?void 0:e.store_code)||""}}}),A=e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`},I=async()=>{try{const e=sessionStorage.getItem("storeConfig");let o=(e?JSON.parse(e):{}).customerAccessTokenLifetime;if(!o){const n=await g();sessionStorage.setItem("storeConfig",JSON.stringify(n)),o=(n==null?void 0:n.customerAccessTokenLifetime)||u}return`Max-Age=${o}`}catch(e){return console.error("getCookiesLifetime() Error:",e),`Max-Age=${u}`}};var d=(e=>(e.CREATE_ACCOUNT_EVENT="create-account",e.SIGN_IN="sign-in",e.SIGN_OUT="sign-out",e))(d||{});const r="authContext",a={CREATE_ACCOUNT:"create-account",SIGN_IN:"sign-in",SIGN_OUT:"sign-out"};function i(e,t){const o=window.adobeDataLayer||[];o.push({[e]:null}),o.push({[e]:t})}function c(e){(window.adobeDataLayer||[]).push(o=>{const n=o.getState?o.getState():{};o.push({event:e,eventInfo:{...n}})})}function p(e){const t=f(e);i(r,t),c(a.CREATE_ACCOUNT)}function E(e){const t=m(e);i(r,t),c(a.SIGN_IN)}function l(e){const t=C(e);i(r,t),c(a.SIGN_OUT)}const _=(e,t)=>{const o=sessionStorage.getItem("storeConfig"),s={...o?JSON.parse(o):{},...t};switch(e){case"create-account":p(s);break;case"sign-in":E(s);break;case"sign-out":l(s);break;default:return null}};export{d as E,A as d,I as g,_ as p};
