/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as a,jsxs as b,Fragment as v}from"@dropins/tools/preact-jsx-runtime.js";import{Price as z,Image as A,CartItem as B,Icon as F,Incrementer as K}from"@dropins/tools/components.js";import{useCallback as H}from"@dropins/tools/preact-hooks.js";import{classes as G,Slot as Q}from"@dropins/tools/lib.js";import{O as R}from"./OrderLoaders.js";import*as d from"@dropins/tools/preact-compat.js";const U=o=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},d.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),d.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),ee=({slots:o,placeholderImage:N="",loading:M,product:e,itemType:Z,taxConfig:j,translations:h,disabledIncrementer:q,onQuantity:P,showConfigurableOptions:k,routeProductDetails:u})=>{var _,f,D,L,V;const{taxExcluded:w,taxIncluded:I}=j,l=H((n,t,s)=>a(z,{amount:n,currency:t,weight:"normal",...s}),[]),S=H(n=>{var s,x;const t=(s=n==null?void 0:n.product)!=null&&s.thumbnail.url.length?(x=n==null?void 0:n.product)==null?void 0:x.thumbnail.url:N;return a(A,{src:t,alt:n==null?void 0:n.productName,loading:"lazy",width:"90",height:"120"})},[N]);if(!e)return a(R,{});let y={};const O=Z==="cancelled",W=(f=(_=e==null?void 0:e.product)==null?void 0:_.stockStatus)==null?void 0:f.includes("IN_STOCK"),i=e==null?void 0:e.giftCard,$=e.totalQuantity>1?{quantity:e.totalQuantity}:{},E=e.discounted,{includeAndExcludeTax:c,includeTax:g,excludeTax:r}=e.taxCalculations,m=e==null?void 0:e.totalQuantity,T={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...i!=null&&i.senderName?{[h.sender]:i==null?void 0:i.senderName}:{},...i!=null&&i.senderEmail?{[h.sender]:i==null?void 0:i.senderEmail}:{},...i!=null&&i.senderName?{[h.sender]:i==null?void 0:i.senderName}:{},...i!=null&&i.recipientEmail?{[h.recipient]:i==null?void 0:i.recipientEmail}:{},...i!=null&&i.message?{[h.message]:i==null?void 0:i.message}:{},...e!=null&&e.downloadableLinks?{[`${(D=e==null?void 0:e.downloadableLinks)==null?void 0:D.count} ${h.downloadableCount}`]:(L=e==null?void 0:e.downloadableLinks)==null?void 0:L.result}:{}};if(I&&w){const n=l(c.originalPrice.value,c.originalPrice.currency),t=l(c.baseOriginalPrice.value*m,c.baseOriginalPrice.currency,{variant:e.discounted?"strikethrough":"default",weight:"bold"}),s=l(c.baseDiscountedPrice.value*m,c.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=l(c.baseExcludingTax.value*m,c.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:!0,taxIncluded:void 0,price:n,total:b(v,{children:[t,e.discounted?s:null]}),totalExcludingTax:x}}else if(!I&&w){const n=l(r.originalPrice.value,r.originalPrice.currency),t=l(r.baseOriginalPrice.value*m,r.baseOriginalPrice.currency,{variant:E?"strikethrough":"default",weight:"bold"}),s=l(r.baseDiscountedPrice.value*m,r.baseDiscountedPrice.currency,{sale:!0,weight:"bold"}),x=l(r.baseExcludingTax.value*m,r.baseExcludingTax.currency,{weight:"bold"});y={taxExcluded:void 0,taxIncluded:void 0,price:n,total:b(v,{children:[t,E?s:null]}),totalExcludingTax:x}}else if(I&&!w){const n=l(g.singleItemPrice.value,g.singleItemPrice.currency),t=l(g.baseOriginalPrice.value*m,g.baseOriginalPrice.currency,{variant:E?"strikethrough":"default",weight:"bold"}),s=l(g.baseDiscountedPrice.value*m,g.baseDiscountedPrice.currency,{sale:!0,weight:"bold"});y={taxExcluded:void 0,taxIncluded:!0,price:n,total:b(v,{children:[t,E?s:null]})}}return a(B,{loading:M,alert:O&&W?b("span",{children:[a(F,{source:U}),h.outOfStock]}):a(v,{}),configurations:(k==null?void 0:k(T))??T,title:u?a("a",{"data-testid":"product-name",className:G(["cart-summary-item__title",["cart-summary-item__title--strikethrough",O]]),href:u(e),children:e==null?void 0:e.productName}):a("div",{"data-testid":"product-name",className:G(["cart-summary-item__title",["cart-summary-item__title--strikethrough",O]]),children:e==null?void 0:e.productName}),sku:a("div",{children:(V=e==null?void 0:e.product)==null?void 0:V.sku}),...$,image:u?a("a",{href:u(e),children:S(e)}):S(e),...y,footer:b(v,{children:[P&&!q?a(K,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:n=>P==null?void 0:P(Number(n)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0,a(Q,{"data-testid":"GiftOptions",name:"GiftOptions",slot:o==null?void 0:o.GiftOptions,context:e})]})})};export{ee as C,U as S};
