import{g as d,F as r}from"./getFormValues.js";const l={PENDING:"pending",AUTHORIZED:"authorized",PARTIALLY_AUTHORIZED:"partiallyAuthorized",RECEIVED:"received",PARTIALLY_RECEIVED:"partiallyReceived",APPROVED:"approved",PARTIALLY_APPROVED:"partiallyApproved",REJECTED:"rejected",PARTIALLY_REJECTED:"partiallyRejected",DENIED:"denied",PROCESSED_AND_CLOSED:"processedAndClosed",CLOSED:"closed"},o=(t,n)=>({id:`${t.id}_${t.fieldType}_${n+1}`,name:`${t.name}_${t.fieldType}_${n+1}`,code:`${t.code}_${t.fieldType}_${n+1}`,customUpperCode:`${t.customUpperCode}_${t.fieldType}_${n+1}`}),E=t=>{const n={};return!t||typeof t!="object"||Object.keys(t).length===0||Object.keys(t).forEach(s=>{if(s.match(/_(\d+)$/)){const i=s.replace(/_\d+$/,"");n[i]=t[s]}else n[s]=t[s]}),n},R=(t,n)=>t.map(s=>({...s,...o(s,n)})),A=(t,n)=>t==null?void 0:t.flatMap(s=>Array.from({length:n},(a,i)=>({...s,...o(s,i)}))),y=t=>{const n=[],s=[];return Object.entries(t).forEach(([a,i])=>{const e=a.lastIndexOf("_"),u=a.slice(0,e),c=a.slice(e+1);c===r.MULTISELECT||c===r.SELECT?n.push({attributeCode:u,value:i}):s.push({attributeCode:u,value:i})}),{selectedCustomAttributes:n,enteredCustomAttributes:s}},_=t=>typeof t!="string"?"":l[t]??"",f=t=>{const n=(t==null?void 0:t.items)??[],s=n.filter(e=>(e==null?void 0:e.eligibleForReturn)&&(e==null?void 0:e.quantityReturnRequested)).map(e=>({...e,totalQuantity:e.quantityReturnRequested})),a=new Map(s.map(e=>[e.id,e])),i=n.map(e=>{const u=a.get(e==null?void 0:e.id);if(u){const c=e.totalQuantity-u.quantityReturnRequested;return c===0?null:{...e,totalQuantity:c}}return e}).filter(e=>e!==null);return{returnedList:s,canceledItems:i==null?void 0:i.filter(e=>e.quantityCanceled),nonCanceledItems:i==null?void 0:i.filter(e=>!e.quantityCanceled)}},h=t=>{var s;const n=[];if(t!=null&&t.current.length)for(let a=0;a<t.current.length;a++){const{current:i}=t.current[a];if(!i)continue;const e=i.name.replace(/_\d+$/,""),u=((s=i==null?void 0:i.dataset)==null?void 0:s.quantity)??1,c=d(i),p=E(c);n.push({orderItemUid:e,quantityToReturn:+u,...y(p)})}return n},q=t=>{var n,s;return(n=t==null?void 0:t.items)!=null&&n.length?(s=t==null?void 0:t.items)==null?void 0:s.sort((a,i)=>{const e=a.quantityShipped-a.quantityReturnRequested===0,u=i.quantityShipped-i.quantityReturnRequested===0;return e&&!u?1:!e&&u?-1:0}):[]};export{f as e,_ as f,R as m,h as p,A as r,q as s};
