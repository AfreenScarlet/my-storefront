import{g as u,F as c}from"./getFormValues.js";const p={PENDING:"pending",AUTHORIZED:"authorized",PARTIALLY_AUTHORIZED:"partiallyAuthorized",RECEIVED:"received",PARTIALLY_RECEIVED:"partiallyReceived",APPROVED:"approved",PARTIALLY_APPROVED:"partiallyApproved",REJECTED:"rejected",PARTIALLY_REJECTED:"partiallyRejected",DENIED:"denied",PROCESSED_AND_CLOSED:"processedAndClosed",CLOSED:"closed"},d=(t,n)=>({id:`${t.id}_${t.fieldType}_${n+1}`,name:`${t.name}_${t.fieldType}_${n+1}`,code:`${t.code}_${t.fieldType}_${n+1}`,customUpperCode:`${t.customUpperCode}_${t.fieldType}_${n+1}`}),E=t=>{const n={};return Object.keys(t).forEach(s=>{if(s.match(/_(\d+)$/)){const a=s.replace(/_\d+$/,"");n[a]=t[s]}else n[s]=t[s]}),n},f=(t,n)=>t.map(s=>({...s,...d(s,n)})),y=(t,n)=>t==null?void 0:t.flatMap(s=>Array.from({length:n},(r,a)=>({...s,...d(s,a)}))),l=t=>{const n=[],s=[];return Object.entries(t).forEach(([r,a])=>{const e=r.lastIndexOf("_"),o=r.slice(0,e),i=r.slice(e+1);i===c.MULTISELECT||i===c.SELECT?n.push({attributeCode:o,value:a}):s.push({attributeCode:o,value:a})}),{selectedCustomAttributes:n,enteredCustomAttributes:s}},A=t=>typeof t!="string"?"":p[t]??"",_=t=>{const n=(t==null?void 0:t.items)??[],s=n.filter(e=>(e==null?void 0:e.eligibleForReturn)&&(e==null?void 0:e.quantityReturnRequested)).map(e=>({...e,totalQuantity:e.quantityReturnRequested})),r=new Map(s.map(e=>[e.id,e])),a=n.map(e=>{const o=r.get(e==null?void 0:e.id);if(o){const i=e.totalQuantity-o.quantityReturnRequested;return i===0?null:{...e,totalQuantity:i}}return e}).filter(e=>e!==null);return{returnedList:s,modifyOrder:a}},m=t=>{const n=[];return t.current.length&&t.current.forEach(({current:s})=>{var o;const r=s==null?void 0:s.name.replace(/_\d+$/,""),a=((o=s==null?void 0:s.dataset)==null?void 0:o.quantity)??1,e=E(u(s));n.push({orderItemUid:r,quantityToReturn:+a,...l(e)})}),n};export{_ as e,A as f,f as m,m as p,y as r};
