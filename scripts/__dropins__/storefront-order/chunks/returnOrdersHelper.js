/*! Copyright 2024 Adobe
All Rights Reserved. */
import{g as d,F as o}from"./getFormValues.js";const p={PENDING:"pending",AUTHORIZED:"authorized",PARTIALLY_AUTHORIZED:"partiallyAuthorized",RECEIVED:"received",PARTIALLY_RECEIVED:"partiallyReceived",APPROVED:"approved",PARTIALLY_APPROVED:"partiallyApproved",REJECTED:"rejected",PARTIALLY_REJECTED:"partiallyRejected",DENIED:"denied",PROCESSED_AND_CLOSED:"processedAndClosed",CLOSED:"closed"},u=(t,n)=>({id:`${t.id}_${t.fieldType}_${n+1}`,name:`${t.name}_${t.fieldType}_${n+1}`,code:`${t.code}_${t.fieldType}_${n+1}`,customUpperCode:`${t.customUpperCode}_${t.fieldType}_${n+1}`}),E=t=>{const n={};return!t||typeof t!="object"||Object.keys(t).length===0||Object.keys(t).forEach(e=>{if(/_(\d+)$/.exec(e)){const i=e==null?void 0:e.replace(/_\d+$/,"");n[i]=t[e]}else n[e]=t[e]}),n},A=(t,n)=>t.map(e=>({...e,...u(e,n)})),C=(t,n)=>t==null?void 0:t.flatMap(e=>Array.from({length:n},(s,i)=>({...e,...u(e,i)}))),l=t=>{const n=[],e=[];return Object.entries(t).forEach(([s,i])=>{const r=s.lastIndexOf("_"),a=s.slice(0,r),c=s.slice(r+1);c===o.MULTISELECT||c===o.SELECT?n.push({attributeCode:a,value:i}):e.push({attributeCode:a,value:i})}),{selectedCustomAttributes:n,enteredCustomAttributes:e}},f=t=>typeof t!="string"?"":p[t]??"",_=t=>{var e;const n=[];if(t!=null&&t.current.length)for(const{current:s}of t.current){if(!s)continue;const i=s.name.replace(/_\d+$/,""),r=((e=s==null?void 0:s.dataset)==null?void 0:e.quantity)??1,a=d(s),c=E(a);n.push({orderItemUid:i,quantityToReturn:+r,...l(c)})}return n},y=t=>{var n;return(n=t==null?void 0:t.items)!=null&&n.length?[...(t==null?void 0:t.items)??[]].filter(e=>t.itemsEligibleForReturn.every(s=>s.id===e.id)).sort((e,s)=>{const i=e.quantityShipped-e.quantityReturnRequested===0,r=s.quantityShipped-s.quantityReturnRequested===0;return i&&!r?1:!i&&r?-1:0}):[]};export{f,A as m,_ as p,C as r,y as s};
