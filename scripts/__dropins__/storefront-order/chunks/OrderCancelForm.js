/*! Copyright 2024 Adobe
All Rights Reserved. */
import{jsxs as C,jsx as r}from"@dropins/tools/preact-jsx-runtime.js";import{InLineAlert as v,Picker as x,Button as F}from"@dropins/tools/components.js";import{F as S}from"./ShippingStatusCard.js";import"@dropins/tools/lib.js";import{useState as i}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/preact-compat.js";import"@dropins/tools/preact.js";import{events as d}from"@dropins/tools/event-bus.js";import{r as E,c as _}from"./requestGuestOrderCancel.js";import{useText as D,Text as l}from"@dropins/tools/i18n.js";const B=({orderRef:t,pickerProps:m,submitButtonProps:u,cancelReasons:o})=>{const n=D({ErrorHeading:"Order.OrderCancelForm.errorHeading",ErrorDescription:"Order.OrderCancelForm.errorDescription",orderCancellationLabel:"Order.OrderCancelForm.label"}),[s,p]=i(0),[f,O]=i(!1),[b,g]=i(!1);d.on("authenticated",e=>{e&&g(!0)},{eager:!0});const h=e=>{e.preventDefault();const a=Number(e.target.value);p(a)};return C(S,{onSubmit:async e=>{e.preventDefault();const a=t.length>20?E:_;return console.log("orderRef",t),a(t,o[s].text,c=>{b||(c.status="guest order cancellation requested"),d.emit("order/data",c)},()=>{O(!0)})},"data-testid":"order-order-cancel-reasons-form__text",children:[f&&r(v,{heading:n.ErrorHeading,description:n.ErrorDescription}),r("div",{className:"order-order-cancel-reasons-form__text",children:r(l,{id:"Order.OrderCancelForm.description"})}),r(x,{name:"cancellationReasons",floatingLabel:n.orderCancellationLabel,defaultOption:o[0],variant:"primary",options:o,value:String(s),handleSelect:h,required:!0,"data-testid":"order-cancellation-reasons-selector",...m}),r("div",{className:"order-order-cancel-reasons-form__button-container",children:r(F,{variant:"primary","data-testid":"order-cancel-submit-button",...u,children:r(l,{id:"Order.OrderCancelForm.button"})})})]})};export{B as O};
