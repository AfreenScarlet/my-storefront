const r=["REJECTED","PARTIALLY_REJECTED","DENIED","UNCONFIRMED","CLOSED"],y=i=>{const n=i==null?void 0:i.returns.filter(t=>!r.includes(t.returnStatus));return((i==null?void 0:i.itemsEligibleForReturn)??[]).flatMap(t=>{let e=t.quantityShipped,u={...t,returnableQuantity:e};return t.quantityShipped===0&&(u={...u,eligibleForReturn:!1,returnableQuantity:0}),n.forEach(c=>{c.items.forEach(l=>{if((l==null?void 0:l.id)===(t==null?void 0:t.id)){const f=e-l.requestQuantity;e=Math.max(f,0),u={...u,eligibleForReturn:e!==0,returnableQuantity:e}}})}),u}).sort((t,e)=>Number(e.eligibleForReturn)-Number(t.eligibleForReturn))},E=i=>{var a;let n=[];return((a=i==null?void 0:i.returns)==null?void 0:a.filter(t=>!r.includes(t.returnStatus)).flatMap(t=>t.items||[])).forEach(t=>{if(!n.length)n.push({...t,totalQuantity:t.requestQuantity});else{const e=n.findIndex(u=>u.id===t.id);e!==-1?n[e].totalQuantity+=t.requestQuantity:n.push({...t,totalQuantity:t.requestQuantity})}}),{returnedList:n,modifyOrder:o(i.items,n)}};function o(i,n){return i.map(s=>{const a=n.find(t=>t.id===s.id);if(a){const t=s.totalQuantity-a.totalQuantity;return{...s,totalQuantity:t===0?null:t}}return s})}export{y as d,E as e};
